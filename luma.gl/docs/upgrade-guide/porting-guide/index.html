<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-upgrade-guide/porting-guide" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.1.0">
<title data-rh="true">Porting Guide | luma.gl</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://luma.gl/luma.gl/docs/upgrade-guide/porting-guide"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Porting Guide | luma.gl"><meta data-rh="true" name="description" content="Given that the changes in the v9 API are quite extensive, this separate porting guide is provided to hopefully help plan the upgrade process."><meta data-rh="true" property="og:description" content="Given that the changes in the v9 API are quite extensive, this separate porting guide is provided to hopefully help plan the upgrade process."><link data-rh="true" rel="icon" href="/luma.gl/img/favicon.png"><link data-rh="true" rel="canonical" href="https://luma.gl/luma.gl/docs/upgrade-guide/porting-guide"><link data-rh="true" rel="alternate" href="https://luma.gl/luma.gl/docs/upgrade-guide/porting-guide" hreflang="en"><link data-rh="true" rel="alternate" href="https://luma.gl/luma.gl/docs/upgrade-guide/porting-guide" hreflang="x-default"><link rel="stylesheet" href="/luma.gl/assets/css/styles.d03034fe.css">
<script src="/luma.gl/assets/js/runtime~main.7b8fa958.js" defer="defer"></script>
<script src="/luma.gl/assets/js/main.39417ce7.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard" data-theme="light">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/luma.gl/"><div class="navbar__logo"><img src="/luma.gl/img/favicon.png" alt="vis.gl Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/luma.gl/img/favicon.png" alt="vis.gl Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">luma.gl</b></a><a class="navbar__item navbar__link" href="/luma.gl/examples">Examples</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/luma.gl/docs">Docs</a><a class="navbar__item navbar__link" href="/luma.gl/docs/tutorials">Tutorials</a><a href="https://medium.com/vis-gl" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/visgl/luma.gl" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="dsla-search-wrapper"><div class="dsla-search-field" data-tags="default,docs-default-current,docs-examples-current"></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/luma.gl/docs/">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/luma.gl/docs/whats-new">What&#x27;s New</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/luma.gl/docs/tutorials/">Tutorials</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/luma.gl/docs/api-guide/background/api-design">API Guide</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/luma.gl/docs/api-reference/">API Reference</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/luma.gl/docs/developer-guide/">Developer Guide</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/luma.gl/docs/upgrade-guide/">Upgrade Guide</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/luma.gl/docs/upgrade-guide/">Upgrade Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/luma.gl/docs/upgrade-guide/porting-guide">Porting Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/luma.gl/docs/upgrade-guide/legacy-guide">Legacy Upgrade Guide</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/luma.gl/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Upgrade Guide</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Porting Guide</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Porting Guide</h1>
<p>Given that the changes in the v9 API are quite extensive, this separate porting guide is provided to hopefully help plan the upgrade process.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="v9-api-design-background">v9 API Design background<a href="#v9-api-design-background" class="hash-link" aria-label="Direct link to v9 API Design background" title="Direct link to v9 API Design background">​</a></h2>
<p>We&#x27;ll start with motivating the changes in v9.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="why-is-the-v9-api-a-major-breaking-change">Why is the v9 API a major breaking change?<a href="#why-is-the-v9-api-a-major-breaking-change" class="hash-link" aria-label="Direct link to Why is the v9 API a major breaking change?" title="Direct link to Why is the v9 API a major breaking change?">​</a></h3>
<p>The three major reasons why the v9 API made big making breaking changes are to take full advantage of WebGPU, TypeScript and to improve long-term maintainability</p>
<p>Basically, the v8 API design focused on providing a set of classes optimized for working with the WebGL2 API, and a significant part of the code was untyped, predating TypeScript introduction.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="wanted-a-webgpu-first-api">Wanted: A &quot;WebGPU-first&quot; API<a href="#wanted-a-webgpu-first-api" class="hash-link" aria-label="Direct link to Wanted: A &quot;WebGPU-first&quot; API" title="Direct link to Wanted: A &quot;WebGPU-first&quot; API">​</a></h4>
<p>Adding WebGPU support was the top priority for luma.gl v9. Some consideration was given towards keeping the existing WebGL2-centric API and providing a WebGPU implementation for that API, to avoid breaking applications. But ultimately that did not make sense. The WebGPU API is quite different from WebGL. WebGPU was designed to avoid the performance overhead that is unavoidable in WebGL APIs (e.g. avoid repeated validation of GPU objects, avoid repeated issuing of same commands, avoid constructs that prevent deep shader optimizations etc). WebGPU is clearly the future of GPU APIs in the browser (WebGL is no longer evolving). It seems doubtful that luma.gl would be able to remain relevant if it stuck to a WebGL-focused API.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="wanted-a-typescript-first-api">Wanted: A &quot;TypeScript-first&quot; API<a href="#wanted-a-typescript-first-api" class="hash-link" aria-label="Direct link to Wanted: A &quot;TypeScript-first&quot; API" title="Direct link to Wanted: A &quot;TypeScript-first&quot; API">​</a></h4>
<p>As luma.gl continued to adopt TypeScript it become clear that modern TypeScript enables a number of simpler, more intuitive API constructions. One example is that in TypeScript we can now safely specify that an &quot;enum type&quot; argument must be one of a few specific strings. By using string values in types, we don&#x27;t need to introduce enumerations or key-value object constants. As an example the <code>Sampler</code> <code>minFilter</code> property is now specified as either <code>&#x27;linear&#x27;</code> or <code>&#x27;nearest&#x27;</code>, rather than <code>GL.LINEAR</code> or <code>GL.NEAREST</code>. This move to string constant values enabled luma.gl to align string constants with the WebGPU standard, avoiding the need to define additional mappings and abstractions on top of the WebGPU API.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="improved-maintainability">Improved Maintainability<a href="#improved-maintainability" class="hash-link" aria-label="Direct link to Improved Maintainability" title="Direct link to Improved Maintainability">​</a></h4>
<p>Another reason for the breaking changes in v9 is simply the removal and restructuring of legacy code. Over 8 releases, the luma.gl API had grown quite large. It exposed all the functionality offered by WebGL2, however many WebGL 2 functions were rarely used. luma.gl contained a lot of code for mutating WebGL resources, which would not work for an applications that also attempts to run on WebGPU, since WebGPU classes are (mostly) immutable. In addition, some core maintainers of luma.gl have moved on, so we took the opportunity to cut out some legacy code to make sure the code base remains accessible and easy to understand for the community. The new WebGPU compatible API provided the just the lens we needed to decide which particular pieces of functionality should be cut.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="effort-estimation">Effort Estimation<a href="#effort-estimation" class="hash-link" aria-label="Direct link to Effort Estimation" title="Direct link to Effort Estimation">​</a></h2>
<p>Suddenly having to upgrade an existing application to a new breaking API version is never fun. A first step for a developer is often to assess how much effort an upgrade is likely to require.</p>
<p>While it is impossible for us to assess here how much work will be required for your specific application, and the list of luma.gl v9 changes listed below is long, it probably looks worse than it is:</p>
<ul>
<li>While the entire API has been modernized, the overall structure and concepts of the classic luma.gl API have been preserved.</li>
<li>The API abstraction level has not changed, and while constants and names etc will need to be updated, programmers should find themselves comfortably working with the same classes in luma.gl v9 as they did in v8, without having to re-learn the API.</li>
<li>They key building block classes like <code>AnimationLoop</code>, <code>Model</code>, <code>Buffer</code>, <code>Texture</code> etc are still available.</li>
<li>Many changes affect parts of the API that are not frequently used in most applications.</li>
<li>In addition, the strong TypeScript typings in luma.gl v9 should create a strong safety net when porting. This means that the typescript compiler should be able to pinpoint most breakages in your application before you even run your code.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="quick-v9-api-overview">Quick v9 API overview<a href="#quick-v9-api-overview" class="hash-link" aria-label="Direct link to Quick v9 API overview" title="Direct link to Quick v9 API overview">​</a></h2>
<p>The luma.gl v9 API is designed to provide portable WebGPU / WebGL 2 API, ground-up TypeScript support, and strong support for working with both WGSL and GLSL shaders.</p>
<p>The new v9 GPU API is now an abstract Device API, meaning that the API itself is specified in terms of TypeScript interfaces and abstract classes that cannot be directly instantiates. Types such as <code>Buffer</code>, <code>Texture</code> etc can not be used on their own, but a subclass that implements the functionality of that class a specific GPU API must be requested from a Device (<code>WebGLBuffer</code>, <code>WebGPUTexture</code>).</p>
<p>The new <code>Device</code> class provides the access point to the new GPU interface. It creates and instruments the WebGL context or the WebGPU adapter, and provides methods to create all the implementation classes (<code>WebGLDevice.createBuffer(... =&gt;  WebGLBuffer</code>, <code>WebGPUDevice.createTexture(... =&gt;  WebGLGPUTexture</code>)</p>
<p>The new <code>CanvasContext</code> class handles context sizing, resolution etc.</p>
<p>The v9 API no longer accepts/returns <code>GL</code> constants, but instead uses the corresponding string values from the WebGPU standard (mapping those transparently under WebGL).</p>
<ul>
<li>The parameter API has been updated to more closely match the WebGPU API. Also parameters are specified on pipelines and render pass creation and are and not as easy to change per draw call as they were in luma.gl v8.</li>
</ul>
<p>In progress</p>
<ul>
<li>
<p>Reading and writing buffers is now an async operation. While WebGL does not support async reads and writes on MacOS, the API is still async to ensure portability to WebGPU.</p>
</li>
<li>
<p>Uniform buffers are now the standard way for the application to specify uniforms. Uniform buffers are &quot;emulated&quot; under WebGL.</p>
</li>
</ul>
<p>A subset of the new interfaces in the luma.gl v9 API:</p>
<table><thead><tr><th>Interface</th><th>Description</th></tr></thead><tbody><tr><td><code>Adapter</code></td><td>luma.gl exposes GPU capabilities on the device in the form of one or more as <code>Adapter</code>s.</td></tr><tr><td><code>Device</code></td><td>Manages resources, and the device’s GPUQueues, which execute commands.</td></tr><tr><td><code>Buffer</code></td><td>The physical resources backed by GPU memory. A <code>Device</code> may have its own memory with high-speed access to the processing units.</td></tr><tr><td><code>Texture</code></td><td>Like buffer, but supports random access</td></tr><tr><td>GPUCommandBuffer and GPURenderBundle are containers for user-recorded commands.</td><td></td></tr><tr><td><code>Shader</code></td><td>Compiled shader code.</td></tr><tr><td><code>Sampler</code></td><td>or GPUBindGroup, configure the way physical resources are used by the GPU.</td></tr></tbody></table>
<p>GPUs execute commands encoded in GPUCommandBuffers by feeding data through a pipeline, which is a mix of fixed-function and programmable stages. Programmable stages execute shaders, which are special programs designed to run on GPU hardware. Most of the state of a pipeline is defined by a GPURenderPipeline or a GPUComputePipeline object. The state not included in these pipeline objects is set during encoding with commands, such as beginRenderPass() or setBlendColor().</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="porting-strategy">Porting Strategy<a href="#porting-strategy" class="hash-link" aria-label="Direct link to Porting Strategy" title="Direct link to Porting Strategy">​</a></h2>
<p>This is based on the porting strategy used to port <a href="https://deck.gl" target="_blank" rel="noopener noreferrer">deck.gl</a>, which is the biggest luma.gl-dependent code base.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="step-1-update-imports">Step 1: Update Imports<a href="#step-1-update-imports" class="hash-link" aria-label="Direct link to Step 1: Update Imports" title="Direct link to Step 1: Update Imports">​</a></h3>
<ul>
<li>Change imports from <code>@luma.gl/gltools</code> to <code>@luma.gl/webgl</code>.</li>
<li>Change imports from <code>@luma.gl/core</code> to <code>@luma.gl/webgl</code>.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="step-2-replace-webglrenderingcontext-with-device">Step 2: Replace WebGLRenderingContext with Device<a href="#step-2-replace-webglrenderingcontext-with-device" class="hash-link" aria-label="Direct link to Step 2: Replace WebGLRenderingContext with Device" title="Direct link to Step 2: Replace WebGLRenderingContext with Device">​</a></h3>
<p>The quickest way to start porting would be to start updating your application to consistently use the new <code>Device</code> class instead of directly working with .</p>
<ul>
<li><strong>Feature Detection</strong> - At the end of this stage it is also possible to replace feature detection constants with the new <code>device.features</code> functionality.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="step-3-replace-canvas-manipulation-with-canvascontext">Step 3: Replace canvas manipulation with CanvasContext<a href="#step-3-replace-canvas-manipulation-with-canvascontext" class="hash-link" aria-label="Direct link to Step 3: Replace canvas manipulation with CanvasContext" title="Direct link to Step 3: Replace canvas manipulation with CanvasContext">​</a></h3>
<p>The handling of canvas related functionality (size, resolution etc) can
be a messy part of WebGL applications.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="step-3-replace-parameter-names">Step 3: Replace parameter names<a href="#step-3-replace-parameter-names" class="hash-link" aria-label="Direct link to Step 3: Replace parameter names" title="Direct link to Step 3: Replace parameter names">​</a></h3>
<p>Recommended changes:</p>
<ul>
<li>Gradually reduce the number of imports <code>@luma.gl/constants</code> and start adopting string constants.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="upgrading-gpu-parameters">Upgrading GPU Parameters<a href="#upgrading-gpu-parameters" class="hash-link" aria-label="Direct link to Upgrading GPU Parameters" title="Direct link to Upgrading GPU Parameters">​</a></h2>
<ul>
<li>Parameters are set on <code>Pipeline</code> creation. They can not be modified, or passed as parameters to draw calls.</li>
<li>Parameters can now only be set, not queried. luma.gl no longer provides a way to query parameters.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="depth-testing">Depth testing<a href="#depth-testing" class="hash-link" aria-label="Direct link to Depth testing" title="Direct link to Depth testing">​</a></h2>
<p>To set up depth testing</p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> value </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setParameters</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  depthWriteEnabled</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  depthCompare</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;less-equal&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/visgl/luma.gl/tree/main/docs/../docs/upgrade-guide/porting-guide.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/luma.gl/docs/upgrade-guide/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Upgrade Guide</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/luma.gl/docs/upgrade-guide/legacy-guide"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Legacy Upgrade Guide</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#v9-api-design-background" class="table-of-contents__link toc-highlight">v9 API Design background</a><ul><li><a href="#why-is-the-v9-api-a-major-breaking-change" class="table-of-contents__link toc-highlight">Why is the v9 API a major breaking change?</a></li></ul></li><li><a href="#effort-estimation" class="table-of-contents__link toc-highlight">Effort Estimation</a></li><li><a href="#quick-v9-api-overview" class="table-of-contents__link toc-highlight">Quick v9 API overview</a></li><li><a href="#porting-strategy" class="table-of-contents__link toc-highlight">Porting Strategy</a><ul><li><a href="#step-1-update-imports" class="table-of-contents__link toc-highlight">Step 1: Update Imports</a></li><li><a href="#step-2-replace-webglrenderingcontext-with-device" class="table-of-contents__link toc-highlight">Step 2: Replace WebGLRenderingContext with Device</a></li><li><a href="#step-3-replace-canvas-manipulation-with-canvascontext" class="table-of-contents__link toc-highlight">Step 3: Replace canvas manipulation with CanvasContext</a></li><li><a href="#step-3-replace-parameter-names" class="table-of-contents__link toc-highlight">Step 3: Replace parameter names</a></li></ul></li><li><a href="#upgrading-gpu-parameters" class="table-of-contents__link toc-highlight">Upgrading GPU Parameters</a></li><li><a href="#depth-testing" class="table-of-contents__link toc-highlight">Depth testing</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/luma.gl/../docs">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://join.slack.com/t/deckgl/shared_invite/zt-7oeoqie8-NQqzSp5SLTFMDeNSPxi7eg" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack workspace<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://medium.com/vis-gl" target="_blank" rel="noopener noreferrer" class="footer__link-item">vis.gl blog (Medium)<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/visgl/luma.gl" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 OpenJS Foundation</div></div></div></footer></div>
</body>
</html>