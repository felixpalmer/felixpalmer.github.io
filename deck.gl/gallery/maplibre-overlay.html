<!DOCTYPE html>
<html>
  <head>
    <script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js"></script>
    <title>Interleaving deck.gl with Maplibre Layers using MapboxOverlay | WebGL visualization</title>
    <link rel="stylesheet" id="font-link" href="https://d1a3f4spazzrp4.cloudfront.net/uber-fonts/3.1.0/refresh.css">

    <meta name="description" content="WebGL-based visualization examples using deck.gl">

    <link rel="icon" type="img/ico" href="https://visgl.github.io/deck.gl/favicon.ico">

    <!-— facebook open graph tags -->
    <meta property="og:url" content="https://visgl.github.io/deck.gl/showcases/gallery" />
    <meta property="og:title" content="Interleaving deck.gl with Maplibre Layers using MapboxOverlay | WebGL visualization" />
    <meta property="og:description" content="WebGL-based visualization examples using deck.gl" />
    <meta property="og:site_name" content="deck.gl" />
    <meta property="og:image" content="https://visgl.github.io/deck.gl/showcases/gallery/images/maplibre-overlay.jpg" />
    <meta property="og:image:type" content="image/jpeg" />
    <meta property="og:image:width" content="800" />
    <meta property="og:image:height" content="480" />
    
    <!-— twitter card tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@uber">
    <meta name="twitter:creator" content="@uber">
    <meta name="twitter:title" content="Interleaving deck.gl with Maplibre Layers using MapboxOverlay | WebGL visualization">
    <meta name="twitter:description" content="WebGL-based visualization examples using deck.gl">
    <meta name="twitter:image" content="https://visgl.github.io/deck.gl/showcases/gallery/images/maplibre-overlay.jpg" />

    <style>
      body {font-family: ff-clan-web-pro, "Helvetica Neue", Helvetica, sans-serif !important; font-size: 12px;}
      #container {width: 100%; max-width: 960px; padding: 40px 12px; margin: auto;}
      #source {margin: 12px 0; border: solid 1px #ccc; padding: 24px}
      #links {margin: 12px 0;}
      #links a {text-decoration: none; color: #444;}
      #links a:hover {color: #08f;}
    </style>

    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-7157694-83', 'auto');
  ga('send', 'pageview');
</script>
  </head>
  <body>
    <div id="container">
      <h1>Interleaving deck.gl with Maplibre Layers using MapboxOverlay</h1>
      <div id="links">
        <a href="./">↩ Back to Gallery</a>
      </div>
      <h2>Demo</h2>
      <iframe width="100%" height="450" frameborder="0" ></iframe>
      <h2>Source</h2>
      <div id="source">
        <code class="prettyprint">&lt;html&gt;<br/>&nbsp;&nbsp;&lt;head&gt;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&lt;title&gt;Interleaving deck.gl with Maplibre Layers using MapboxOverlay&lt;/title&gt;<br/>&nbsp;&nbsp;&nbsp;&nbsp;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&lt;script src="https://unpkg.com/deck.gl@^9.0.0-beta.5/dist.min.js"&gt;&lt;/script&gt;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&lt;script src="https://unpkg.com/maplibre-gl@^3.0.0/dist/maplibre-gl.js"&gt;&lt;/script&gt;<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&lt;link href="https://unpkg.com/maplibre-gl@^3.0.0/dist/maplibre-gl.css" rel="stylesheet" /&gt;<br/>&nbsp;&nbsp;&lt;/head&gt;<br/><br/>&nbsp;&nbsp;&lt;body style="margin:0"&gt;&lt;/body&gt;<br/><br/>&nbsp;&nbsp;&lt;script type="text/javascript"&gt;<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;const {MapboxOverlay, ScatterplotLayer, ArcLayer} = deck;<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;const map = new maplibregl.Map({<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;container: document.body,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;style: 'https://basemaps.cartocdn.com/gl/positron-gl-style/style.json',<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;center: [-122.4, 37.79],<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;zoom: 15,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pitch: 60,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;antialias: true<br/>&nbsp;&nbsp;&nbsp;&nbsp;});<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;map.on('style.load', () =&gt; {<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const firstLabelLayerId = map.getStyle().layers.find(layer =&gt; layer.type === 'symbol').id;<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;map.removeLayer('building')<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;map.removeLayer('building-top')<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;map.addLayer({<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'id': '3d-buildings',<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'source': 'carto',<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'source-layer': 'building',<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'type': 'fill-extrusion',<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'minzoom': 15,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'paint': {<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'fill-extrusion-color': '#aaa',<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// use an 'interpolate' expression to add a smooth transition effect to the<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// buildings as the user zooms in<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'fill-extrusion-height': [<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"interpolate", ["linear"], ["zoom"],<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;15, 0,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;15.05, ["get", "render_height"]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'fill-extrusion-base': [<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"interpolate", ["linear"], ["zoom"],<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;15, 0,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;15.05, ["get", "render_min_height"]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'fill-extrusion-opacity': .6<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}, firstLabelLayerId);<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const deckOverlay = new MapboxOverlay({<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;interleaved: true,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;layers: [<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;new ScatterplotLayer({<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;id: 'deckgl-circle',<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data: [<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{position: [-122.402, 37.79], color: [255, 0, 0], radius: 1000}<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;getPosition: d =&gt; d.position,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;getFillColor: d =&gt; d.color,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;getRadius: d =&gt; d.radius,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;opacity: 0.3,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;beforeId: firstLabelLayerId<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}),<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;new ArcLayer({<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;id: 'deckgl-arc',<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data: [<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{source: [-122.3998664, 37.7883697], target: [-122.400068, 37.7900503]}<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;getSourcePosition: d =&gt; d.source,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;getTargetPosition: d =&gt; d.target,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;getSourceColor: [255, 208, 0],<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;getTargetColor: [0, 128, 255],<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;getWidth: 8<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;map.addControl(deckOverlay);<br/>&nbsp;&nbsp;&nbsp;&nbsp;});<br/><br/><br/>&nbsp;&nbsp;&lt;/script&gt;<br/>&lt;/html&gt;</code>
      </div>
    </div>
    <script>var src = unescape('%3Chtml%3E%0A%20%20%3Chead%3E%0A%20%20%20%20%3Ctitle%3EInterleaving%20deck.gl%20with%20Maplibre%20Layers%20using%20MapboxOverlay%3C/title%3E%0A%20%20%20%20%0A%20%20%20%20%3Cscript%20src%3D%22https%3A//unpkg.com/deck.gl@%5E9.0.0-beta.5/dist.min.js%22%3E%3C/script%3E%0A%20%20%20%20%3Cscript%20src%3D%22https%3A//unpkg.com/maplibre-gl@%5E3.0.0/dist/maplibre-gl.js%22%3E%3C/script%3E%0A%0A%20%20%20%20%3Clink%20href%3D%22https%3A//unpkg.com/maplibre-gl@%5E3.0.0/dist/maplibre-gl.css%22%20rel%3D%22stylesheet%22%20/%3E%0A%20%20%3C/head%3E%0A%0A%20%20%3Cbody%20style%3D%22margin%3A0%22%3E%3C/body%3E%0A%0A%20%20%3Cscript%20type%3D%22text/javascript%22%3E%0A%0A%20%20%20%20const%20%7BMapboxOverlay%2C%20ScatterplotLayer%2C%20ArcLayer%7D%20%3D%20deck%3B%0A%0A%20%20%20%20const%20map%20%3D%20new%20maplibregl.Map%28%7B%0A%20%20%20%20%20%20container%3A%20document.body%2C%0A%20%20%20%20%20%20style%3A%20%27https%3A//basemaps.cartocdn.com/gl/positron-gl-style/style.json%27%2C%0A%20%20%20%20%20%20center%3A%20%5B-122.4%2C%2037.79%5D%2C%0A%20%20%20%20%20%20zoom%3A%2015%2C%0A%20%20%20%20%20%20pitch%3A%2060%2C%0A%20%20%20%20%20%20antialias%3A%20true%0A%20%20%20%20%7D%29%3B%0A%0A%20%20%20%20map.on%28%27style.load%27%2C%20%28%29%20%3D%3E%20%7B%0A%20%20%20%20%20%20const%20firstLabelLayerId%20%3D%20map.getStyle%28%29.layers.find%28layer%20%3D%3E%20layer.type%20%3D%3D%3D%20%27symbol%27%29.id%3B%0A%0A%20%20%20%20%20%20map.removeLayer%28%27building%27%29%0A%20%20%20%20%20%20map.removeLayer%28%27building-top%27%29%0A%20%20%20%20%20%20map.addLayer%28%7B%0A%20%20%20%20%20%20%20%20%27id%27%3A%20%273d-buildings%27%2C%0A%20%20%20%20%20%20%20%20%27source%27%3A%20%27carto%27%2C%0A%20%20%20%20%20%20%20%20%27source-layer%27%3A%20%27building%27%2C%0A%20%20%20%20%20%20%20%20%27type%27%3A%20%27fill-extrusion%27%2C%0A%20%20%20%20%20%20%20%20%27minzoom%27%3A%2015%2C%0A%20%20%20%20%20%20%20%20%27paint%27%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%27fill-extrusion-color%27%3A%20%27%23aaa%27%2C%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20//%20use%20an%20%27interpolate%27%20expression%20to%20add%20a%20smooth%20transition%20effect%20to%20the%0A%20%20%20%20%20%20%20%20%20%20%20%20//%20buildings%20as%20the%20user%20zooms%20in%0A%20%20%20%20%20%20%20%20%20%20%20%20%27fill-extrusion-height%27%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22interpolate%22%2C%20%5B%22linear%22%5D%2C%20%5B%22zoom%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2015%2C%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2015.05%2C%20%5B%22get%22%2C%20%22render_height%22%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%27fill-extrusion-base%27%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22interpolate%22%2C%20%5B%22linear%22%5D%2C%20%5B%22zoom%22%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2015%2C%200%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2015.05%2C%20%5B%22get%22%2C%20%22render_min_height%22%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%27fill-extrusion-opacity%27%3A%20.6%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%2C%20firstLabelLayerId%29%3B%0A%0A%20%20%20%20%20%20const%20deckOverlay%20%3D%20new%20MapboxOverlay%28%7B%0A%20%20%20%20%20%20%20%20interleaved%3A%20true%2C%0A%20%20%20%20%20%20%20%20layers%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20new%20ScatterplotLayer%28%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20id%3A%20%27deckgl-circle%27%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20data%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7Bposition%3A%20%5B-122.402%2C%2037.79%5D%2C%20color%3A%20%5B255%2C%200%2C%200%5D%2C%20radius%3A%201000%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20getPosition%3A%20d%20%3D%3E%20d.position%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20getFillColor%3A%20d%20%3D%3E%20d.color%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20getRadius%3A%20d%20%3D%3E%20d.radius%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20opacity%3A%200.3%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20beforeId%3A%20firstLabelLayerId%0A%20%20%20%20%20%20%20%20%20%20%7D%29%2C%0A%20%20%20%20%20%20%20%20%20%20new%20ArcLayer%28%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20id%3A%20%27deckgl-arc%27%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20data%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7Bsource%3A%20%5B-122.3998664%2C%2037.7883697%5D%2C%20target%3A%20%5B-122.400068%2C%2037.7900503%5D%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20getSourcePosition%3A%20d%20%3D%3E%20d.source%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20getTargetPosition%3A%20d%20%3D%3E%20d.target%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20getSourceColor%3A%20%5B255%2C%20208%2C%200%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20getTargetColor%3A%20%5B0%2C%20128%2C%20255%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20getWidth%3A%208%0A%20%20%20%20%20%20%20%20%20%20%7D%29%0A%20%20%20%20%20%20%20%20%5D%0A%20%20%20%20%20%20%7D%29%3B%0A%0A%20%20%20%20%20%20map.addControl%28deckOverlay%29%3B%0A%20%20%20%20%7D%29%3B%0A%0A%0A%20%20%3C/script%3E%0A%3C/html%3E');</script>
    <script type="text/javascript">
      var blob = new Blob([src], {type: 'text/html'});
      document.querySelector('iframe').src = URL.createObjectURL(blob);
    </script>
  </body>
</html>