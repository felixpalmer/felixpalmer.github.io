"use strict";(self.webpackChunkproject_website=self.webpackChunkproject_website||[]).push([[7212],{3905:(e,t,a)=>{a.d(t,{Zo:()=>s,kt:()=>k});var r=a(67294);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},l=Object.keys(e);for(r=0;r<l.length;r++)a=l[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)a=l[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var c=r.createContext({}),p=function(e){var t=r.useContext(c),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},s=function(e){var t=p(e.components);return r.createElement(c.Provider,{value:t},e.children)},d="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var a=e.components,n=e.mdxType,l=e.originalType,c=e.parentName,s=i(e,["components","mdxType","originalType","parentName"]),d=p(a),m=n,k=d["".concat(c,".").concat(m)]||d[m]||u[m]||l;return a?r.createElement(k,o(o({ref:t},s),{},{components:a})):r.createElement(k,o({ref:t},s))}));function k(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var l=a.length,o=new Array(l);o[0]=m;var i={};for(var c in t)hasOwnProperty.call(t,c)&&(i[c]=t[c]);i.originalType=e,i[d]="string"==typeof e?e:n,o[1]=i;for(var p=2;p<l;p++)o[p]=a[p];return r.createElement.apply(null,o)}return r.createElement.apply(null,a)}m.displayName="MDXCreateElement"},37408:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>c,contentTitle:()=>o,default:()=>u,frontMatter:()=>l,metadata:()=>i,toc:()=>p});var r=a(83117),n=(a(67294),a(3905));const l={},o="@deck.gl/carto",i={unversionedId:"api-reference/carto/overview",id:"api-reference/carto/overview",title:"@deck.gl/carto",description:"Deck.gl is the preferred and official solution for creating modern geospatial web applications using CARTO Location Intelligence platform.",source:"@site/../docs/api-reference/carto/overview.md",sourceDirName:"api-reference/carto",slug:"/api-reference/carto/overview",permalink:"/deck.gl/docs/api-reference/carto/overview",draft:!1,editUrl:"https://github.com/visgl/deck.gl/tree/master/website/../docs/api-reference/carto/overview.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"loadArcGISModules",permalink:"/deck.gl/docs/api-reference/arcgis/load-arcgis-modules"},next:{title:"fetchMap",permalink:"/deck.gl/docs/api-reference/carto/fetch-map"}},c={},p=[{value:"Install package",id:"install-package",level:2},{value:"Usage",id:"usage",level:2},{value:"Automatically create layers configured in CARTO Builder",id:"automatically-create-layers-configured-in-carto-builder",level:3},{value:"Custom layers connected to CARTO datasource",id:"custom-layers-connected-to-carto-datasource",level:3},{value:"Examples",id:"examples",level:3},{value:"CARTO credentials",id:"carto-credentials",level:3},{value:"Support for other deck.gl layers",id:"support-for-other-deckgl-layers",level:3},{value:"Constants",id:"constants",level:3}],s={toc:p},d="wrapper";function u(e){let{components:t,...a}=e;return(0,n.kt)(d,(0,r.Z)({},s,a,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"deckglcarto"},"@deck.gl/carto"),(0,n.kt)("p",null,"Deck.gl is the preferred and official solution for creating modern geospatial web applications using ",(0,n.kt)("a",{parentName:"p",href:"https://carto.com/"},"CARTO Location Intelligence platform"),"."),(0,n.kt)("p",null,"With deck.gl and the all-new ",(0,n.kt)("strong",{parentName:"p"},"CARTO 3 platform")," you can directly access spatial datasets and tilesets that are hosted in your current cloud data warehouse. CARTO 3 provides seamless integrations with Google BigQuery, Amazon Redshift, Snowflake, Databricks and PostgreSQL-compatible databases, eliminating the need to move your data into CARTO."),(0,n.kt)("img",{src:"https://raw.githubusercontent.com/CartoDB/viz-doc/master/deck.gl/img/osm_buildings.jpg"}),(0,n.kt)("p",null,"The platform integrates with the CARTO Maps API to:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Provide a geospatial backend storage for your geospatial data."),(0,n.kt)("li",{parentName:"ul"},"Visualize large datasets overcoming browser memory limitations."),(0,n.kt)("li",{parentName:"ul"},"Provide an SQL spatial interface to work directly with your data.")),(0,n.kt)("img",{src:"https://raw.githubusercontent.com/CartoDB/viz-doc/master/deck.gl/img/eu_rivers.jpg"}),(0,n.kt)("h2",{id:"install-package"},"Install package"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"npm install deck.gl\n# or\nnpm install @deck.gl/core @deck.gl/layers @deck.gl/geo-layers @deck.gl/carto\n")),(0,n.kt)("h2",{id:"usage"},"Usage"),(0,n.kt)("h3",{id:"automatically-create-layers-configured-in-carto-builder"},"Automatically create layers configured in CARTO Builder"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-js"},"import {Deck} from '@deck.gl/core';\nimport {fetchMap} from '@deck.gl/carto';\n\nconst cartoMapId = 'ff6ac53f-741a-49fb-b615-d040bc5a96b8';\nfetchMap({cartoMapId}).then(map => new Deck(map));\n")),(0,n.kt)("h3",{id:"custom-layers-connected-to-carto-datasource"},"Custom layers connected to CARTO datasource"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-js"},"import DeckGL from '@deck.gl/react';\nimport {CartoLayer, setDefaultCredentials, API_VERSIONS, MAP_TYPES} from '@deck.gl/carto';\n\nsetDefaultCredentials({accessToken: 'XXX'});\n\nfunction App({viewState}) {\n  const layer = new CartoLayer({\n    type: MAP_TYPES.QUERY,\n    connection: 'bigquery',\n    data: 'SELECT * FROM cartobq.testtables.points_10k',\n    pointRadiusMinPixels: 2,\n    getLineColor: [0, 0, 0, 200],\n    getFillColor: [238, 77, 90],\n    lineWidthMinPixels: 1\n  });\n\n  return <DeckGL viewState={viewState} layers={[layer]} />;\n}\n")),(0,n.kt)("h3",{id:"examples"},"Examples"),(0,n.kt)("p",null,"You can see working examples for the following:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("a",{parentName:"p",href:"https://carto.com/developers/deck-gl/examples/"},"Scripting"),": Quick scripting examples to play with the module without NPM or Webpack. If you're not a web developer, this is probably what you're looking for.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("a",{parentName:"p",href:"https://github.com/CartoDB/viz-doc/tree/master/deck.gl/examples/react"},"React"),": Integrate in a React application.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("a",{parentName:"p",href:"https://github.com/CartoDB/viz-doc/tree/master/deck.gl/examples/pure-js"},"Pure JS"),": Integrate in a pure js application, using webpack."))),(0,n.kt)("h3",{id:"carto-credentials"},"CARTO credentials"),(0,n.kt)("p",null,"This is an object to define the connection to CARTO, including the credentials (and optionally the parameters to point to specific API endpoints)."),(0,n.kt)("p",null,"These are the available properties:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"apiBaseUrl")," (optional): base URL for requests to the API (can be obtained in the CARTO 3 Workspace). Default: ",(0,n.kt)("inlineCode",{parentName:"li"},"https://gcp-us-east1.api.carto.com"),"."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"accessToken")," (optional): token to authenticate/authorize requests to the Maps API (private datasets)"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"mapsUrl")," (optional): Maps API URL Template. By default it is derived from ",(0,n.kt)("inlineCode",{parentName:"li"},"apiBaseUrl"),":",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"https://{apiBaseUrl}/v3/maps"))))),(0,n.kt)("h3",{id:"support-for-other-deckgl-layers"},"Support for other deck.gl layers"),(0,n.kt)("p",null,"The CARTO submodule includes the CartoLayer that simplifies the interaction with the CARTO platform. If you want to use other deck.gl layers (i.e. ArcLayer, H3HexagonLayer...), there are two possibilities depending on the API version you are using:"),(0,n.kt)("p",null,"You can directly retrieve the data in the format expected by the layer using the ",(0,n.kt)("inlineCode",{parentName:"p"},"fetchLayerData")," function:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-js"},"import {FORMATS, fetchLayerData} from '@deck.gl/carto';\nimport {H3HexagonLayer} from '@deck.gl/geo-layers/';\n\nconst {data} = await fetchLayerData({\n  type: MAP_TYPES.QUERY,\n  source: `SELECT bqcarto.h3.ST_ASH3(internal_point_geom, 4) as h3, count(*) as count\n              FROM bigquery-public-data.geo_us_census_places.us_national_places WHERE state=?\n            GROUP BY h3`,\n  connection: 'connection_name',\n  format: FORMATS.JSON,\n  queryParameters: ['AL']\n});\n\nnew H3HexagonLayer({\n  data,\n  filled: true,\n  getHexagon: d => d.h3,\n  getFillColor: d => [0, (1 - d.count / 10) * 255, 0],\n  getLineColor: [0, 0, 0, 200]\n});\n")),(0,n.kt)("p",null,"The formats available are JSON, GEOJSON, TILEJSON, and NDJSON. ",(0,n.kt)("a",{parentName:"p",href:"http://ndjson.org/"},"NDJSON")," (Newline Delimited JSON) allows to handle incremental data loading ",(0,n.kt)("a",{parentName:"p",href:"https://deck.gl/docs/developer-guide/performance#handle-incremental-data-loading"},"https://deck.gl/docs/developer-guide/performance#handle-incremental-data-loading"),"."),(0,n.kt)("h3",{id:"constants"},"Constants"),(0,n.kt)("p",null,"To make it easier to work with the CARTO module the following constants are provided:"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},"ENUMERATION"),(0,n.kt)("th",{parentName:"tr",align:null},"VALUES"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"API_VERSIONS"),(0,n.kt)("td",{parentName:"tr",align:null},"V1")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null}),(0,n.kt)("td",{parentName:"tr",align:null},"V2")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null}),(0,n.kt)("td",{parentName:"tr",align:null},"V3")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"MAP_TYPES"),(0,n.kt)("td",{parentName:"tr",align:null},"QUERY")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null}),(0,n.kt)("td",{parentName:"tr",align:null},"TABLE")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null}),(0,n.kt)("td",{parentName:"tr",align:null},"TILESET")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"FORMATS"),(0,n.kt)("td",{parentName:"tr",align:null},"GEOJSON")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null}),(0,n.kt)("td",{parentName:"tr",align:null},"JSON")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null}),(0,n.kt)("td",{parentName:"tr",align:null},"TILEJSON")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null}),(0,n.kt)("td",{parentName:"tr",align:null},"NDJSON")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"TILE_FORMATS"),(0,n.kt)("td",{parentName:"tr",align:null},"BINARY")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null}),(0,n.kt)("td",{parentName:"tr",align:null},"JSON")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null}),(0,n.kt)("td",{parentName:"tr",align:null},"GEOJSON")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null}),(0,n.kt)("td",{parentName:"tr",align:null},"MVT")))))}u.isMDXComponent=!0}}]);