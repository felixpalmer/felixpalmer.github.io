"use strict";(self.webpackChunkproject_website=self.webpackChunkproject_website||[]).push([[4837],{37072:(e,t,o)=>{o.d(t,{J:()=>s});var n=o(10513),r=o(38846);const s={props:{},name:"gouraudMaterial",vs:r.l.replace("phongMaterial","gouraudMaterial"),fs:r.X.replace("phongMaterial","gouraudMaterial"),defines:{LIGHTING_VERTEX:1},dependencies:[n.x],uniformTypes:{ambient:"f32",diffuse:"f32",shininess:"f32",specularColor:"vec3<f32>"},defaultUniforms:{ambient:.35,diffuse:.6,shininess:32,specularColor:[.15,.15,.15]},getUniforms(e){const t={...e};return t.specularColor&&(t.specularColor=t.specularColor.map((e=>e/255))),{...s.defaultUniforms,...t}}}},23589:(e,t,o)=>{o.d(t,{R:()=>xe});var n=o(41660),r=o(327),s=o(87597),i=o(31886),a=o(4912),u=o(38925),l=o(8045),c=o(53618),d=o(78307),f=o(49332),S=o(94976),h=o(50473),_=o(71530);const p=542327876,m=31,T=0,b=1,C=2,R=3,E=4,g=7,M=20,A=21,x=131072,P=4,y={DXT1:h.b.COMPRESSED_RGB_S3TC_DXT1_EXT,DXT3:h.b.COMPRESSED_RGBA_S3TC_DXT3_EXT,DXT5:h.b.COMPRESSED_RGBA_S3TC_DXT5_EXT,"ATC ":h.b.COMPRESSED_RGB_ATC_WEBGL,ATCA:h.b.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL,ATCI:h.b.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL},D={DXT1:G,DXT3:w,DXT5:w,"ATC ":G,ATCA:w,ATCI:w};function O(e){const t=new Int32Array(e,0,m),o=t[A];(0,S.v)(Boolean(t[M]&P),"DDS: Unsupported format, must contain a FourCC code");const n=(r=o,String.fromCharCode(255&r,r>>8&255,r>>16&255,r>>24&255));var r;const s=y[n],i=D[n];(0,S.v)(s&&i,`DDS: Unknown pixel format ${o}`);let a=1;t[C]&x&&(a=Math.max(1,t[g]));const u=t[E],l=t[R],c=t[b]+4,d=new Uint8Array(e,c);return(0,_.C)(d,{mipMapLevels:a,width:u,height:l,sizeFunction:i,internalFormat:s})}function G(e,t){return(e+3>>2)*(t+3>>2)*8}function w(e,t){return(e+3>>2)*(t+3>>2)*16}const B=55727696,L=1347834371,F=13,I=52,H=0,v=2,U=4,X=6,N=7,k=11,$=12,K={0:[h.b.COMPRESSED_RGB_PVRTC_2BPPV1_IMG],1:[h.b.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG],2:[h.b.COMPRESSED_RGB_PVRTC_4BPPV1_IMG],3:[h.b.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG],6:[h.b.COMPRESSED_RGB_ETC1_WEBGL],7:[h.b.COMPRESSED_RGB_S3TC_DXT1_EXT],9:[h.b.COMPRESSED_RGBA_S3TC_DXT3_EXT],11:[h.b.COMPRESSED_RGBA_S3TC_DXT5_EXT],22:[h.b.COMPRESSED_RGB8_ETC2],23:[h.b.COMPRESSED_RGBA8_ETC2_EAC],24:[h.b.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2],25:[h.b.COMPRESSED_R11_EAC],26:[h.b.COMPRESSED_RG11_EAC],27:[h.b.COMPRESSED_RGBA_ASTC_4X4_KHR,h.b.COMPRESSED_SRGB8_ALPHA8_ASTC_4X4_KHR],28:[h.b.COMPRESSED_RGBA_ASTC_5X4_KHR,h.b.COMPRESSED_SRGB8_ALPHA8_ASTC_5X4_KHR],29:[h.b.COMPRESSED_RGBA_ASTC_5X5_KHR,h.b.COMPRESSED_SRGB8_ALPHA8_ASTC_5X5_KHR],30:[h.b.COMPRESSED_RGBA_ASTC_6X5_KHR,h.b.COMPRESSED_SRGB8_ALPHA8_ASTC_6X5_KHR],31:[h.b.COMPRESSED_RGBA_ASTC_6X6_KHR,h.b.COMPRESSED_SRGB8_ALPHA8_ASTC_6X6_KHR],32:[h.b.COMPRESSED_RGBA_ASTC_8X5_KHR,h.b.COMPRESSED_SRGB8_ALPHA8_ASTC_8X5_KHR],33:[h.b.COMPRESSED_RGBA_ASTC_8X6_KHR,h.b.COMPRESSED_SRGB8_ALPHA8_ASTC_8X6_KHR],34:[h.b.COMPRESSED_RGBA_ASTC_8X8_KHR,h.b.COMPRESSED_SRGB8_ALPHA8_ASTC_8X8_KHR],35:[h.b.COMPRESSED_RGBA_ASTC_10X5_KHR,h.b.COMPRESSED_SRGB8_ALPHA8_ASTC_10X5_KHR],36:[h.b.COMPRESSED_RGBA_ASTC_10X6_KHR,h.b.COMPRESSED_SRGB8_ALPHA8_ASTC_10X6_KHR],37:[h.b.COMPRESSED_RGBA_ASTC_10X8_KHR,h.b.COMPRESSED_SRGB8_ALPHA8_ASTC_10X8_KHR],38:[h.b.COMPRESSED_RGBA_ASTC_10X10_KHR,h.b.COMPRESSED_SRGB8_ALPHA8_ASTC_10X10_KHR],39:[h.b.COMPRESSED_RGBA_ASTC_12X10_KHR,h.b.COMPRESSED_SRGB8_ALPHA8_ASTC_12X10_KHR],40:[h.b.COMPRESSED_RGBA_ASTC_12X12_KHR,h.b.COMPRESSED_SRGB8_ALPHA8_ASTC_12X12_KHR]},V={0:z,1:z,2:W,3:W,6:j,7:j,9:q,11:q,22:j,23:q,24:j,25:j,26:q,27:q,28:function(e,t){return Math.floor((e+4)/5)*Math.floor((t+3)/4)*16},29:function(e,t){return Math.floor((e+4)/5)*Math.floor((t+4)/5)*16},30:function(e,t){return Math.floor((e+5)/6)*Math.floor((t+4)/5)*16},31:function(e,t){return Math.floor((e+5)/6)*Math.floor((t+5)/6)*16},32:function(e,t){return Math.floor((e+7)/8)*Math.floor((t+4)/5)*16},33:function(e,t){return Math.floor((e+7)/8)*Math.floor((t+5)/6)*16},34:function(e,t){return Math.floor((e+7)/8)*Math.floor((t+7)/8)*16},35:function(e,t){return Math.floor((e+9)/10)*Math.floor((t+4)/5)*16},36:function(e,t){return Math.floor((e+9)/10)*Math.floor((t+5)/6)*16},37:function(e,t){return Math.floor((e+9)/10)*Math.floor((t+7)/8)*16},38:function(e,t){return Math.floor((e+9)/10)*Math.floor((t+9)/10)*16},39:function(e,t){return Math.floor((e+11)/12)*Math.floor((t+9)/10)*16},40:function(e,t){return Math.floor((e+11)/12)*Math.floor((t+11)/12)*16}};function z(e,t){return(e=Math.max(e,16))*(t=Math.max(t,8))/4}function W(e,t){return(e=Math.max(e,8))*(t=Math.max(t,8))/2}function j(e,t){return Math.floor((e+3)/4)*Math.floor((t+3)/4)*8}function q(e,t){return Math.floor((e+3)/4)*Math.floor((t+3)/4)*16}function J(e){if((0,f.e)(e))return(0,f.V)(e);if(function(e){return new Uint32Array(e,0,m)[T]===p}(e))return O(e);if(function(e){const t=new Uint32Array(e,0,F)[H];return t===B||t===L}(e))return function(e){const t=new Uint32Array(e,0,F),o=t[v],n=t[U],r=K[o]||[],s=r.length>1&&n?r[1]:r[0],i=V[o],a=t[k],u=t[N],l=t[X],c=I+t[$],d=new Uint8Array(e,c);return(0,_.C)(d,{mipMapLevels:a,width:u,height:l,sizeFunction:i,internalFormat:s})}(e);throw new Error("Texture container format not recognized")}var Q=o(84241);const Y={...{dataType:null,batchType:null,name:"Texture Containers",id:"compressed-texture",module:"textures",version:d.x,worker:!0,extensions:["ktx","ktx2","dds","pvr"],mimeTypes:["image/ktx2","image/ktx","image/vnd-ms.dds","image/x-dds","application/octet-stream"],binary:!0,options:{"compressed-texture":{libraryPath:"libs/",useBasis:!1}}},parse:async(e,t)=>{if(t?.["compressed-texture"]?.useBasis){t.basis={format:{alpha:"BC3",noAlpha:"BC1"},...t.basis,containerFormat:"ktx2",module:"encoder"};return(await(0,Q.A)(e,t))[0]}return J(e)}};var Z,ee=o(77067);function te(e){let t;try{const o=new URL(e);t=`${o.origin}${o.pathname}`,t.startsWith("null")&&(t=null)}catch(o){t=null}return t||e}function oe(e,t=null){return t?`${e}?token=${t}`:e}!function(e){e.vertexCount="vertexCount",e.featureCount="featureCount"}(Z||(Z={}));var ne=o(10033);function re(e){switch(e){case"UInt8":return Uint8Array;case"UInt16":return Uint16Array;case"UInt32":return Uint32Array;case"Float32":return Float32Array;case"UInt64":return Float64Array;default:throw new Error(`parse i3s tile content: unknown type of data: ${e}`)}}const se={UInt8:ne.GL.UNSIGNED_BYTE,UInt16:ne.GL.UNSIGNED_SHORT,Float32:ne.GL.FLOAT,UInt32:ne.GL.UNSIGNED_INT,UInt64:ne.GL.DOUBLE};function ie(e){switch(e){case"UInt8":return 1;case"UInt16":case"Int16":return 2;case"UInt32":case"Int32":case"Float32":return 4;case"UInt64":case"Int64":case"Float64":return 8;default:throw new Error(`parse i3s tile content: unknown size of data: ${e}`)}}var ae;!function(e){e[e.DEFAULT=-1]="DEFAULT",e[e.LNGLAT=1]="LNGLAT",e[e.METER_OFFSETS=2]="METER_OFFSETS",e[e.LNGLAT_OFFSETS=3]="LNGLAT_OFFSETS",e[e.CARTESIAN=0]="CARTESIAN"}(ae||(ae={}));const ue=new s.P([0,0,0]);const le="i3s-attribute-type";async function ce(e,t,o,d,f){const S={attributes:{},indices:null,featureIds:[],vertexCount:0,modelMatrix:new i.k,coordinateSystem:0,byteLength:0,texture:null};if(t.textureUrl){const e=oe(t.textureUrl,d?.i3s?.token),o=function(e){switch(e){case"ktx-etc2":case"dds":return Y;case"ktx2":return ee.E;default:return l.$}}(t.textureFormat),s=f?.fetch||fetch,i=await s(e),a=await i.arrayBuffer();if(d?.i3s.decodeTextures){if(o===l.$){const e={...t.textureLoaderOptions,image:{type:"data"}};try{const t=await(0,u.N9)(a,[],e,f);S.texture=t}catch(h){const t=await(0,n.q)(a,o,e,f);S.texture=t}}else if(o===Y||o===ee.E){let e=await(0,r.H)(a,o,t.textureLoaderOptions);o===ee.E&&(e=e[0]),S.texture={compressed:!0,mipmaps:!1,width:e[0].width,height:e[0].height,data:e}}}else S.texture=a}return S.material=function(e,t){let o;e?o={...e,pbrMetallicRoughness:e.pbrMetallicRoughness?{...e.pbrMetallicRoughness}:{baseColorFactor:[255,255,255,255]}}:(o={pbrMetallicRoughness:{}},t?o.pbrMetallicRoughness.baseColorTexture={texCoord:0}:o.pbrMetallicRoughness.baseColorFactor=[255,255,255,255]);o.alphaCutoff=o.alphaCutoff||.25,o.alphaMode&&(o.alphaMode=o.alphaMode.toUpperCase());o.emissiveFactor&&(o.emissiveFactor=he(o.emissiveFactor));o.pbrMetallicRoughness&&o.pbrMetallicRoughness.baseColorFactor&&(o.pbrMetallicRoughness.baseColorFactor=he(o.pbrMetallicRoughness.baseColorFactor));t&&function(e,t){const o={source:{image:t}};e.pbrMetallicRoughness&&e.pbrMetallicRoughness.baseColorTexture?e.pbrMetallicRoughness.baseColorTexture={...e.pbrMetallicRoughness.baseColorTexture,texture:o}:e.emissiveTexture?e.emissiveTexture={...e.emissiveTexture,texture:o}:e.pbrMetallicRoughness&&e.pbrMetallicRoughness.metallicRoughnessTexture?e.pbrMetallicRoughness.metallicRoughnessTexture={...e.pbrMetallicRoughness.metallicRoughnessTexture,texture:o}:e.normalTexture?e.normalTexture={...e.normalTexture,texture:o}:e.occlusionTexture&&(e.occlusionTexture={...e.occlusionTexture,texture:o})}(o,t);return o}(t.materialDefinition,S.texture),S.material&&(S.texture=null),await async function(e,t,o,r,u){const l=e.byteLength;let d,f,S,h=0,_=0;if(o.isDracoGeometry){const t=await(0,n.q)(e,c.Vl,{draco:{attributeNameEntry:le}});f=t.header.vertexCount,S=t.indices?.value;const{POSITION:o,NORMAL:r,COLOR_0:s,TEXCOORD_0:i,"feature-index":a,"uv-region":u}=t.attributes;d={position:o,normal:r,color:s,uv0:i,uvRegion:u,id:a},function(e,t){for(const o in t.loaderData.attributes){const n=t.loaderData.attributes[o];switch(n.name){case"POSITION":e.position.metadata=n.metadata;break;case"feature-index":e.id.metadata=n.metadata}}}(d,t);const l=function(e){return e?.metadata?.["i3s-feature-ids"]?.intArray}(a);l&&function(e,t){const o=e.id.value,n=new Float32Array(o.length);for(let r=0;r<o.length;r++)n[r]=t[o[r]];e.id.value=n}(d,l)}else{const{vertexAttributes:t,ordering:o,featureAttributes:n,featureAttributeOrder:s}=r.store.defaultGeometrySchema,i=function(e,t){let o=0,n=0,r=0;for(const{property:s,type:i}of t.store.defaultGeometrySchema.header){const t=re(i);switch(s){case Z.vertexCount.toString():n=new t(e,0,4)[0],o+=ie(i);break;case Z.featureCount.toString():r=new t(e,4,4)[0],o+=ie(i)}}return{vertexCount:n,featureCount:r,byteOffset:o}}(e,r);h=i.byteOffset,f=i.vertexCount,_=i.featureCount;const{attributes:a,byteOffset:u}=fe(e,h,t,f,o),{attributes:l}=fe(e,u,n,_,s);!function(e){const{id:t,faceRange:o}=e;if(!t||!o)return;const n=t.value,r=o.value,s=r[r.length-1]+1,i=new Uint32Array(3*s);let a=0,u=0;for(let l=1;l<r.length;l+=2){const e=Number(n[a]),t=u+3*(r[l]-r[l-1]+1);i.fill(e,u,t),a++,u=t}e.id.value=i}(l),d=function(e,t){return{...e,...t}}(a,l)}if(u?.i3s?.coordinateSystem&&u.i3s.coordinateSystem!==ae.METER_OFFSETS)t.modelMatrix=function(e){const t=e.metadata,o=t?.["i3s-scale_x"]?.double||1,n=t?.["i3s-scale_y"]?.double||1,r=new i.k;return r[0]=o,r[5]=n,r}(d.position),t.coordinateSystem=ae.LNGLAT_OFFSETS;else{const e=function(e,t){const o=t.mbs,n=e.value,r=e.metadata,u=new i.k,l=new s.P(o[0],o[1],o[2]),c=new s.P;return a.C.WGS84.cartographicToCartesian(l,c),a.C.WGS84.eastNorthUpToFixedFrame(c,u),e.value=function(e,t={},o){const n=new Float64Array(e.length),r=t["i3s-scale_x"]&&t["i3s-scale_x"].double||1,s=t["i3s-scale_y"]&&t["i3s-scale_y"].double||1;for(let i=0;i<n.length;i+=3)n[i]=e[i]*r+o.x,n[i+1]=e[i+1]*s+o.y,n[i+2]=e[i+2]+o.z;for(let i=0;i<n.length;i+=3)a.C.WGS84.cartographicToCartesian(n.subarray(i,i+3),ue),n[i]=ue.x,n[i+1]=ue.y,n[i+2]=ue.z;return n}(n,r,l),u}(d.position,o);t.modelMatrix=e.invert(),t.coordinateSystem=ae.METER_OFFSETS}t.attributes={positions:d.position,normals:d.normal,colors:de(d.color),texCoords:d.uv0,uvRegions:de(d.uvRegion||d.region)},t.indices=S||null,d.id&&d.id.value&&(t.featureIds=d.id.value);for(const n in t.attributes)t.attributes[n]||delete t.attributes[n];return t.vertexCount=f,t.byteLength=l,t}(e,S,t,o,d)}function de(e){return e?(e.normalized=!0,e):e}function fe(e,t,o,n,r){const s={};for(const i of r)if(o[i]){const{valueType:r,valuesPerElement:a}=o[i];if(t+n*a*ie(r)<=e.byteLength){const o=e.slice(t);let u;if("UInt64"===r)u=Se(o,n*a,ie(r));else{u=new(re(r))(o,0,n*a)}if(s[i]={value:u,type:se[r],size:a},"color"===i)s.color.normalized=!0;t+=n*a*ie(r)}else if("uv0"!==i)break}return{attributes:s,byteOffset:t}}function Se(e,t,o){const n=[],r=new DataView(e);let s=0;for(let i=0;i<t;i++){const e=r.getUint32(s,!0)+2**32*r.getUint32(s+4,!0);n.push(e),s+=o}return new Uint32Array(n)}function he(e){const t=[...e];for(let o=0;o<e.length;o++)t[o]=e[o]/255;return t}const _e={dataType:null,batchType:null,name:"I3S Content (Indexed Scene Layers)",id:"i3s-content",module:"i3s",worker:!0,version:"4.3.2",mimeTypes:["application/octet-stream"],parse:async function(e,t,o){const{tile:n,_tileOptions:r,tileset:s,_tilesetOptions:i}=t?.i3s||{},a=r||n,u=i||s;if(!a||!u)return null;return await ce(e,a,u,t,o)},extensions:["bin"],options:{"i3s-content":{}}};var pe=o(67733),me=o(4999),Te=o(64257);const be={dataType:null,batchType:null,name:"I3S Node Page",id:"i3s-node-page",module:"i3s",version:"4.3.2",mimeTypes:["application/json"],parse:async function(e,t){return JSON.parse((new TextDecoder).decode(e))},extensions:["json"],options:{i3s:{}}};class Ce{tileset;nodePages=[];pendingNodePages=[];nodesPerPage;options;lodSelectionMetricType;textureDefinitionsSelectedFormats=[];nodesInNodePages;url;textureLoaderOptions={};constructor(e,t="",o){this.tileset={...e},this.url=t,this.nodesPerPage=e.nodePages?.nodesPerPage||64,this.lodSelectionMetricType=e.nodePages?.lodSelectionMetricType,this.options=o,this.nodesInNodePages=0,this.initSelectedFormatsForTextureDefinitions(e)}async getNodeById(e){const t=Math.floor(e/this.nodesPerPage);if(!this.nodePages[t]&&!this.pendingNodePages[t]){const e=oe(`${this.url}/nodepages/${t}`,this.options.i3s?.token);this.pendingNodePages[t]={status:"Pending",promise:(0,r.H)(e,be,this.options)},this.nodePages[t]=await this.pendingNodePages[t].promise,this.nodesInNodePages+=this.nodePages[t].nodes.length,this.pendingNodePages[t].status="Done"}"Pending"===this.pendingNodePages[t].status&&(this.nodePages[t]=await this.pendingNodePages[t].promise);const o=e%this.nodesPerPage;return this.nodePages[t].nodes[o]}async formTileFromNodePages(e){const t=await this.getNodeById(e),o=[],n=[];for(const f of t.children||[])n.push(this.getNodeById(f));const r=await Promise.all(n);for(const f of r)o.push({id:f.index.toString(),obb:f.obb});let s,i,a,u="jpg",l=[],c=!1;if(t&&t.mesh){const{url:e,isDracoGeometry:o}=t.mesh.geometry&&this.getContentUrl(t.mesh.geometry)||{isDracoGeometry:!1};s=e,c=o;const{textureData:n,materialDefinition:r}=this.getInformationFromMaterial(t.mesh.material);a=r,u=n.format||u,n.name&&(i=`${this.url}/nodes/${t.mesh.material.resource}/textures/${n.name}`),this.tileset.attributeStorageInfo&&(l=function(e,t,o){const n=[],{attributeStorageInfo:r=[]}=e;for(let s=0;s<r.length;s++){const e=r[s].key;n.push(`${t}/nodes/${o}/attributes/${e}/0`)}return n}(this.tileset,this.url,t.mesh.attribute.resource))}const d=this.getLodSelection(t);return Re({id:e.toString(),lodSelection:d,obb:t.obb,contentUrl:s,textureUrl:i,attributeUrls:l,materialDefinition:a,textureFormat:u,textureLoaderOptions:this.textureLoaderOptions,children:o,isDracoGeometry:c})}getContentUrl(e){let t=null;const o=this.tileset.geometryDefinitions[e.definition];let n=-1;if(this.options.i3s&&this.options.i3s.useDracoGeometry&&(n=o.geometryBuffers.findIndex((e=>e.compressedAttributes&&"draco"===e.compressedAttributes.encoding))),-1===n&&(n=o.geometryBuffers.findIndex((e=>!e.compressedAttributes))),-1!==n){const r=Boolean(o.geometryBuffers[n].compressedAttributes);t={url:`${this.url}/nodes/${e.resource}/geometries/${n}`,isDracoGeometry:r}}return t}getLodSelection(e){const t=[];return"maxScreenThresholdSQ"===this.lodSelectionMetricType&&t.push({metricType:"maxScreenThreshold",maxError:Math.sqrt(e.lodThreshold/(.25*Math.PI))}),t.push({metricType:this.lodSelectionMetricType,maxError:e.lodThreshold}),t}getInformationFromMaterial(e){const t={textureData:{name:null}};if(e){const o=this.tileset.materialDefinitions?.[e.definition];if(o){t.materialDefinition=o;const e=o?.pbrMetallicRoughness?.baseColorTexture?.textureSetDefinitionId;"number"==typeof e&&(t.textureData=this.textureDefinitionsSelectedFormats[e]||t.textureData)}}return t}initSelectedFormatsForTextureDefinitions(e){this.textureDefinitionsSelectedFormats=[];const t=this.getSupportedTextureFormats(),o=e.textureSetDefinitions||[];for(const n of o){const e=n&&n.formats||[];let o=null;for(const n of t){const t=e.find((e=>e.format===n));if(t){o=t;break}}o&&"ktx2"===o.format&&(this.textureLoaderOptions.basis={format:(0,Q.a)(),containerFormat:"ktx2",module:"encoder"}),this.textureDefinitionsSelectedFormats.push(o)}}getSupportedTextureFormats(){const e=[];if(!this.options.i3s||this.options.i3s.useCompressedTextures){const t=(0,Te.E)();t.has("etc2")&&e.push("ktx-etc2"),t.has("dxt")&&e.push("dds"),e.push("ktx2")}return e.push("jpg"),e.push("png"),e}}function Re(e){const t={};let o=[0,0,0,1];if(e.mbs)o=e.mbs,t.sphere=[...a.C.WGS84.cartographicToCartesian(e.mbs.slice(0,3)),e.mbs[3]];else if(e.obb){t.box=[...a.C.WGS84.cartographicToCartesian(e.obb.center),...e.obb.halfSize,...e.obb.quaternion];const n=(new pe.CB).fromCenterHalfSizeQuaternion(t.box.slice(0,3),e.obb.halfSize,e.obb.quaternion).getBoundingSphere();t.sphere=[...n.center,n.radius],o=[...e.obb.center,n.radius]}const n=e.lodSelection?.[0].metricType,r=e.lodSelection?.[0].maxError,s=me.WH.MESH,i=me.lH.REPLACE;return{...e,mbs:o,boundingVolume:t,lodMetricType:n,lodMetricValue:r,type:s,refine:i}}const Ee=/layers\/[0-9]+$/,ge=/\.slpk$/,Me=/nodes\/([0-9-]+|root)$/,Ae="PointCloud",xe={dataType:null,batchType:null,name:"I3S (Indexed Scene Layers)",id:"i3s",module:"i3s",version:"4.3.2",mimeTypes:["application/octet-stream"],parse:async function(e,t={},o){const s=o.url;t.i3s=t.i3s||{};if("504b0304"===function(e){if(e instanceof ArrayBuffer)return[...new Uint8Array(e,0,4)].map((e=>e.toString(16).padStart(2,"0"))).join("");return null}(e))throw new Error("Files with .slpk extention currently are not supported by I3SLoader");const i=te(s);let a,u;a="auto"===t.i3s.isTileset?Ee.test(i)||ge.test(i):t.i3s.isTileset;u="auto"===t.isTileHeader?Me.test(i):t.i3s.isTileHeader;e=a?await async function(e,t,o){const n=JSON.parse((new TextDecoder).decode(e));if(n?.layerType===Ae)throw new Error("Point Cloud layers currently are not supported by I3SLoader");const s=await async function(e,t,o){const n=te(o.url||"");let s,i;if(e.nodePages)s=new Ce(e,n,t),i=await s.formTileFromNodePages(0);else{const e=oe(`${n}/nodes/root`,t.i3s.token);i=await(0,r.H)(e,xe,{...t,i3s:{...t.i3s,loadContent:!1,isTileHeader:!0,isTileset:!1}})}return{...e,loader:xe,url:n,basePath:n,type:me.yy.I3S,nodePagesTile:s,root:i,lodMetricType:i.lodMetricType,lodMetricValue:i.lodMetricValue}}(n,t,o);return s}(e,t,o):u?await async function(e,t){return e=JSON.parse((new TextDecoder).decode(e)),function(e,t){const o=t.url||"";let n,r,s;e.geometryData&&(n=`${o}/${e.geometryData[0].href}`),e.textureData&&(r=`${o}/${e.textureData[0].href}`),e.attributeData&&(s=function(e,t){const{attributeData:o=[]}=t,n=[];for(let r=0;r<o.length;r++){const t=o[r].href.replace("./","");n.push(`${e}/${t}`)}return n}(o,e));const i=e.children||[];return Re({...e,children:i,url:o,contentUrl:n,textureUrl:r,textureFormat:"jpg",attributeUrls:s,isDracoGeometry:!1})}(e,t)}(e,o):await async function(e,t){return await(0,n.q)(e,_e,t)}(e,t);return e},extensions:["bin"],options:{i3s:{token:null,isTileset:"auto",isTileHeader:"auto",tile:null,tileset:null,_tileOptions:null,_tilesetOptions:null,useDracoGeometry:!0,useCompressedTextures:!0,decodeTextures:!0,coordinateSystem:ae.METER_OFFSETS}}}},28453:(e,t,o)=>{o.d(t,{R:()=>i,x:()=>a});var n=o(96540);const r={},s=n.createContext(r);function i(e){const t=n.useContext(s);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),n.createElement(s.Provider,{value:t},e.children)}}}]);