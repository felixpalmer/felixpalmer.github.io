(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))c(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const r of t.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&c(r)}).observe(document,{childList:!0,subtree:!0});function s(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function c(e){if(e.ep)return;e.ep=!0;const t=s(e);fetch(e.href,t)}})();const m=["apiBaseUrl","cartoMapId","deckVersion"],a=new URLSearchParams(location.search.slice(1));for(const n of m)a.has(n)||h(`Must provide '${n}' as URL parameter`);const f=a.get("apiBaseUrl"),g=a.get("cartoMapId"),d=a.get("deckVersion");async function y(){await l(`https://unpkg.com/deck.gl@${d}/dist.min.js`),await l(`https://unpkg.com/@deck.gl/carto@${d}/dist.min.js`),deck.carto.fetchMap({apiBaseUrl:f,cartoMapId:g}).then(({initialViewState:n,mapStyle:o,layers:s})=>{const c=new deck.Deck({canvas:"deck-canvas",controller:!0,initialViewState:n,layers:s}),e=`https://basemaps.cartocdn.com/gl/${o.styleType}-gl-style/style.json`,t=new maplibregl.Map({container:"map",style:e,interactive:!1});c.setProps({onViewStateChange:({viewState:r})=>{const{longitude:i,latitude:p,...u}=r;t.jumpTo({center:[i,p],...u})},onAfterRender:()=>{const r=s.every(i=>i.isLoaded);document.getElementById("loading-indicator").style.display=r?"none":"block"}})})}y();function h(n){document.getElementById("container").innerHTML=`<div class="error-message">${n}</div>`,document.getElementById("loading-indicator").style.display="none"}async function l(n){const o=document.createElement("script");o.type="text/javascript";const s=new Promise(c=>{o.onload=c});o.src=n,document.head.append(o),await s}
